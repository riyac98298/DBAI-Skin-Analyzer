{% extends "base.html" %}
{% block content %}
<div class="grid gap-6 md:grid-cols-3">
  <!-- Tips with selfie image -->
  <section class="md:col-span-1">
    <div class="rounded-2xl border bg-white p-5 shadow-sm">
      <img src="{{ url_for('static', filename='image/selfie.jpg') }}" alt="Selfie example"
           class="mb-4 w-full rounded-xl ring-1 ring-gray-200 object-cover" />
      <h2 class="mb-3 text-lg font-semibold">How to take your selfie</h2>
      <ul class="space-y-2 text-sm text-gray-600 list-disc pl-5">
        <li>Go bare-faced (no makeup) so skin is visible.</li>
        <li>Use bright, natural light from the front; avoid harsh backlight.</li>
        <li>Hold the camera at eye level and center your face.</li>
        <li>Neutral background; look straight with a relaxed expression.</li>
      </ul>
    </div>
  </section>

  <!-- Form -->
  <section class="md:col-span-2">
    <form id="analyze-form" class="rounded-2xl border bg-white p-6 shadow-sm space-y-5"
          action="{{ url_for('analyze') }}" method="POST" enctype="multipart/form-data">
      <h2 class="text-lg font-semibold">Enter your details</h2>

      <div class="grid gap-4 md:grid-cols-2">
        <label class="block">
          <span class="mb-1 block text-sm font-medium">Age</span>
          <input required type="number" min="10" max="100" name="age"
                 class="w-full rounded-lg border-gray-300 focus:border-brand focus:ring-brand" placeholder="22" />
        </label>
        <label class="block">
          <span class="mb-1 block text-sm font-medium">Skin Type</span>
          <select required name="skin_type"
                  class="w-full rounded-lg border-gray-300 focus:border-brand focus:ring-brand">
            <option value="" disabled selected>Selectâ€¦</option>
            <option>Dry</option><option>Normal</option><option>Combination</option>
            <option>Oily</option><option>Sensitive</option>
          </select>
        </label>
      </div>

      <div>
        <span class="mb-1 block text-sm font-medium">Upload a selfie</span>
        <label class="flex cursor-pointer items-center justify-between gap-4 rounded-xl border-2 border-dashed p-4 hover:bg-gray-50">
          <div class="text-sm text-gray-600">
            <span class="font-medium text-brand">Choose file</span> or drag & drop (JPG/PNG)
          </div>
          <input id="file-input" required type="file" accept="image/*" name="photo" class="hidden" />
        </label>
        <div id="preview" class="mt-3 hidden">
          <img id="preview-img" alt="preview" class="h-52 w-full rounded-xl object-cover ring-1 ring-gray-200" />
        </div>
      </div>

      <div class="flex items-center gap-3">
        <button id="analyze-btn" class="inline-flex items-center gap-2 rounded-xl bg-brand px-5 py-2 font-medium text-white hover:bg-brand-dark">
          <svg class="h-4 w-4 animate-spin hidden" id="spinner" viewBox="0 0 24 24" fill="none"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"/></svg>
          Analyze
        </button>
        <span id="form-msg" class="text-sm text-gray-500"></span>
      </div>
    </form>
  </section>
</div>
{% endblock %}
